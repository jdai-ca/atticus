{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://atticus.app/schemas/provider-config.json",
    "title": "Atticus Provider Configuration Schema",
    "description": "Schema for validating AI provider configuration files",
    "type": "object",
    "required": [
        "version",
        "minAppVersion",
        "providers"
    ],
    "properties": {
        "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+$",
            "description": "Semantic version of the config file"
        },
        "minAppVersion": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+$",
            "description": "Minimum app version required for this config"
        },
        "lastUpdated": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of last update"
        },
        "updateUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL to fetch config updates from"
        },
        "providers": {
            "type": "array",
            "minItems": 1,
            "description": "Array of AI provider configurations",
            "items": {
                "$ref": "#/definitions/provider"
            }
        }
    },
    "definitions": {
        "provider": {
            "type": "object",
            "required": [
                "id",
                "name",
                "displayName",
                "description",
                "endpoint",
                "defaultModel",
                "models",
                "capabilities",
                "authentication",
                "ui"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "openai",
                        "anthropic",
                        "google",
                        "azure-openai",
                        "xai",
                        "mistral",
                        "cohere",
                        "groq",
                        "perplexity"
                    ],
                    "description": "Unique provider identifier"
                },
                "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Provider name"
                },
                "displayName": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Display name shown in UI"
                },
                "description": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Provider description"
                },
                "endpoint": {
                    "type": "string",
                    "description": "API endpoint URL (can be empty for user-configured endpoints)"
                },
                "defaultModel": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Default model ID"
                },
                "models": {
                    "type": "array",
                    "minItems": 1,
                    "description": "Available models",
                    "items": {
                        "$ref": "#/definitions/model"
                    }
                },
                "capabilities": {
                    "$ref": "#/definitions/capabilities"
                },
                "authentication": {
                    "$ref": "#/definitions/authentication"
                },
                "ui": {
                    "$ref": "#/definitions/ui"
                }
            }
        },
        "model": {
            "type": "object",
            "required": [
                "id",
                "name",
                "description",
                "enabled"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Unique model identifier"
                },
                "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Display name"
                },
                "description": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Model description"
                },
                "enabled": {
                    "type": "boolean",
                    "description": "Whether model is enabled by default"
                },
                "deprecated": {
                    "type": "boolean",
                    "description": "Whether model is deprecated"
                },
                "betaFlag": {
                    "type": "boolean",
                    "description": "Whether model is in beta"
                }
            }
        },
        "capabilities": {
            "type": "object",
            "required": [
                "supportsMultimodal",
                "supportsRAG"
            ],
            "properties": {
                "supportsMultimodal": {
                    "type": "boolean",
                    "description": "Whether provider supports images/multimodal"
                },
                "supportsRAG": {
                    "type": "boolean",
                    "description": "Whether provider supports document RAG"
                },
                "supportsStreaming": {
                    "type": "boolean",
                    "description": "Whether provider supports streaming responses"
                }
            }
        },
        "authentication": {
            "type": "object",
            "required": [
                "apiKeyFormat",
                "apiKeyLabel",
                "getApiKeyUrl"
            ],
            "properties": {
                "apiKeyFormat": {
                    "type": "string",
                    "description": "Example API key format"
                },
                "apiKeyLabel": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Label for API key input"
                },
                "getApiKeyUrl": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL to obtain API key"
                }
            }
        },
        "ui": {
            "type": "object",
            "required": [
                "icon",
                "order"
            ],
            "properties": {
                "icon": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Emoji or icon for UI"
                },
                "order": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Display order in UI"
                },
                "featured": {
                    "type": "boolean",
                    "description": "Whether to feature this provider"
                }
            }
        }
    }
}